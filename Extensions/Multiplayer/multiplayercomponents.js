var gdjs;(function(D){const d=new D.Logger("Multiplayer");let v;(function(n){const m="lobbies-root-container",w="lobbies-frame-container",I="lobbies-close-container",N="lobbies-loader-container",T="lobbies-texts-container",p="lobbies-iframe-container",C="lobbies-iframe";let M=!0;const b=[];n.getDomElementContainer=e=>{const t=e.getGame().getRenderer().getDomElementContainer();return t||(d.error("No DOM element container found."),null)},n.getLobbiesRootContainer=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${m}`):null},n.getLobbiesLoaderContainer=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${N}`):null},n.getLobbiesIframeContainer=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${p}`):null},n.getLobbiesCloseContainer=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${I}`):null},n.getLobbiesTextsContainer=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${T}`):null},n.getLobbiesIframe=e=>{const t=n.getDomElementContainer(e);return t?t.querySelector(`#${C}`):null},n.displayLobbies=function(e,t){const o=n.getDomElementContainer(e);if(!o)return;const l=document.createElement("div");l.id=m,l.style.position="relative",l.style.backgroundColor="rgba(14, 6, 45, 0.5)",l.style.opacity="1",l.style.width="100%",l.style.height="100%",l.style.zIndex="2",l.style.pointerEvents="all";const i=document.createElement("div");i.id=w,i.style.backgroundColor="#FFFFFF",i.style.position="absolute",i.style.top="16px",i.style.bottom="16px",i.style.left="16px",i.style.right="16px",i.style.borderRadius="8px",i.style.boxShadow="0px 4px 4px rgba(0, 0, 0, 0.25)",i.style.overflow="hidden";const r=document.createElement("div");r.id=I,r.style.cursor="pointer",r.style.display="flex",r.style.justifyContent="right",r.style.alignItems="center",r.style.zIndex="3",r.style.position="absolute",r.style.top="32px",r.style.right="32px",f(r,t);const g=document.createElement("img");g.setAttribute("width","15px"),g.setAttribute("src","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI4IiB2aWV3Qm94PSIwIDAgOCA4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuODUzNTUgMC4xNDY0NDdDOC4wNDg4MiAwLjM0MTcwOSA4LjA0ODgyIDAuNjU4MjkxIDcuODUzNTUgMC44NTM1NTNMMC44NTM1NTMgNy44NTM1NUMwLjY1ODI5MSA4LjA0ODgyIDAuMzQxNzA5IDguMDQ4ODIgMC4xNDY0NDcgNy44NTM1NUMtMC4wNDg4MTU1IDcuNjU4MjkgLTAuMDQ4ODE1NSA3LjM0MTcxIDAuMTQ2NDQ3IDcuMTQ2NDVMNy4xNDY0NSAwLjE0NjQ0N0M3LjM0MTcxIC0wLjA0ODgxNTUgNy42NTgyOSAtMC4wNDg4MTU1IDcuODUzNTUgMC4xNDY0NDdaIiBmaWxsPSIjMUQxRDI2Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMC4xNDY0NDcgMC4xNDY0NDdDMC4zNDE3MDkgLTAuMDQ4ODE1NSAwLjY1ODI5MSAtMC4wNDg4MTU1IDAuODUzNTUzIDAuMTQ2NDQ3TDcuODUzNTUgNy4xNDY0NUM4LjA0ODgyIDcuMzQxNzEgOC4wNDg4MiA3LjY1ODI5IDcuODUzNTUgNy44NTM1NUM3LjY1ODI5IDguMDQ4ODIgNy4zNDE3MSA4LjA0ODgyIDcuMTQ2NDUgNy44NTM1NUwwLjE0NjQ0NyAwLjg1MzU1M0MtMC4wNDg4MTU1IDAuNjU4MjkxIC0wLjA0ODgxNTUgMC4zNDE3MDkgMC4xNDY0NDcgMC4xNDY0NDdaIiBmaWxsPSIjMUQxRDI2Ii8+Cjwvc3ZnPgo="),r.appendChild(g),M||(r.style.visibility="hidden");const s=document.createElement("div");s.id=N,s.style.display="flex",s.style.flexDirection="column",s.style.height="100%",s.style.width="100%",s.style.justifyContent="center",s.style.alignItems="center";const a=document.createElement("img");a.setAttribute("width","28px"),a.setAttribute("src","data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iYW5pbWF0ZS1zcGluIC1tbC0xIG1yLTMgaC01IHctNSB0ZXh0LXdoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CjxjaXJjbGUgb3BhY2l0eT0nMC4yNScgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSI0Ij48L2NpcmNsZT4KPHBhdGggb3BhY2l0eT0nMC43NScgZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNCAxMmE4IDggMCAwMTgtOFYwQzUuMzczIDAgMCA1LjM3MyAwIDEyaDR6bTIgNS4yOTFBNy45NjIgNy45NjIgMCAwMTQgMTJIMGMwIDMuMDQyIDEuMTM1IDUuODI0IDMgNy45MzhsMy0yLjY0N3oiPjwvcGF0aD4KPC9zdmc+"),a.style.marginTop="50px";try{a.animate([{transform:"rotate(0deg)"},{transform:"rotate(359deg)"}],{duration:3e3,iterations:1/0})}catch{d.warn("Animation not supported, loader will be fixed.")}s.appendChild(a);const c=document.createElement("div");c.id=p,c.style.display="flex",c.style.flexDirection="column",c.style.height="100%",c.style.width="100%",c.style.justifyContent="stretch",c.style.alignItems="stretch",c.style.display="none",i.appendChild(r),i.appendChild(s),i.appendChild(c),l.appendChild(i),o.appendChild(l)},n.displayIframeInsideLobbiesContainer=(e,t)=>{const o=n.getLobbiesIframeContainer(e),l=n.getLobbiesLoaderContainer(e),i=n.getLobbiesTextsContainer(e);if(!o||!l||!i){d.error("Lobbies containers not found.");return}const r=document.createElement("iframe");r.id=C,r.setAttribute("sandbox","allow-forms allow-modals allow-orientation-lock allow-popups allow-same-origin allow-scripts"),r.addEventListener("load",()=>{o.style.display="flex",l.style.display="none"}),r.addEventListener("loaderror",()=>{n.addReloadUrlToTextsContainer(()=>{o.removeChild(r),o.style.display="none",l.style.display="flex",n.displayIframeInsideLobbiesContainer(e,t)},i)}),r.src=t,r.style.flex="1",r.style.border="0",o.appendChild(r)},n.addTextsToLoadingContainer=(e,t,o)=>{const l=n.getLobbiesLoaderContainer(e);if(!l){d.error("Loader container not found.");return}const i=document.createElement("div");if(i.id=T,i.style.display="flex",i.style.flexDirection="column",i.style.width="100%",i.style.justifyContent="center",i.style.alignItems="center",i.style.position="relative",i.style.zIndex="3",i.style.fontSize="11pt",i.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',!t){const r=document.createElement("h1");r.innerText="Publish your game!",r.style.fontSize="20pt",r.style.fontWeight="bold";const g=document.createElement("p");g.innerText="GDevelop's lobbies are only available for published games.";const s=document.createElement("p");s.innerText="Click the button below to learn how to publish your game then try again.",i.appendChild(r),i.appendChild(g),i.appendChild(s),l.innerHTML="";const a=document.createElement("a");f(a,o),a.innerText="How to publish my game",a.style.color="#0078d4",a.style.textDecoration="none",a.style.textDecoration="underline",a.style.cursor="pointer",i.appendChild(a)}l.prepend(i)},n.addReloadUrlToTextsContainer=(e,t)=>{const o=document.createElement("a");f(o,e),o.innerText="Try again",o.style.color="#0078d4",o.style.textDecoration="none",o.style.textDecoration="underline",o.style.cursor="pointer",t.appendChild(o)},n.removeLobbiesContainer=function(e){const t=n.getLobbiesRootContainer(e);!t||t.remove()},n.changeLobbiesWindowCloseActionVisibility=function(e,t){M=t;const o=n.getLobbiesCloseContainer(e);!o||(o.style.visibility=t?"inherit":"hidden")},n.hideLobbiesCloseButtonTemporarily=function(e){if(!M)return;const t=n.getLobbiesCloseContainer(e);!t||(t.style.visibility="hidden",setTimeout(()=>{t.style.visibility="inherit"},1e4))},n.displayErrorNotification=function(e){n.showNotification({runtimeScene:e,content:"An error occurred while displaying the game lobbies, please try again.",type:"error"})},n.displayPlayerLeftNotification=function(e,t){n.showNotification({runtimeScene:e,content:`${t} left.`,type:"warning"})},n.displayPlayerJoinedNotification=function(e,t){n.showNotification({runtimeScene:e,content:`${t} joined.`,type:"success"})},n.displayConnectionErrorNotification=function(e){n.showNotification({runtimeScene:e,content:"Could not connect to other players.",type:"error"})},n.displayHostMigrationNotification=function(e){n.showNotification({runtimeScene:e,content:"Migrating host...",type:"warning",id:"migrating-host",persist:!0})},n.showHostMigrationFinishedNotification=function(e){x("migrating-host"),n.showNotification({runtimeScene:e,content:"Host migrated!",type:"success"})},n.showHostMigrationFailedNotification=function(e){x("migrating-host"),n.showNotification({runtimeScene:e,content:"Host migration failed.",type:"error"})};const x=function(e){const t=document.getElementById(e);if(!t){d.warn(`Notification ${e} not found. skipping`);return}const o=b.indexOf(e);o!==-1&&b.splice(o,1),t.remove();for(let l=o;l<b.length;l++){const i=document.getElementById(b[l]);if(!i){d.error("Notification not found.");continue}i.style.top=`${12+l*32}px`}};n.showNotification=function({runtimeScene:e,content:t,type:o,id:l,persist:i}){if(b.length>5){const j=b.shift();if(!j){d.error("No oldest notification ID found.");return}x(j)}const r=l||`notification-${Math.random().toString(36).substring(7)}`,g=e.getGame().getRenderer().getDomElementContainer();if(!g){d.error("No DOM element container found.");return}const s=document.createElement("div");s.id=r,s.style.position="absolute",s.style.pointerEvents="all",s.style.backgroundColor=o==="success"?"#0E062D":o==="warning"?"#FFA500":"#FF0000",s.style.top=`${12+b.length*32}px`,s.style.right="16px",s.style.padding="6px 32px 6px 6px",s.style.zIndex="1",s.style.display="flex",s.style.flexDirection="row-reverse",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.boxShadow="0px 4px 4px rgba(0, 0, 0, 0.25)",s.style.borderRadius="4px",s.style.fontSize="11pt",s.style.color="#FFFFFF",s.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';try{s.animate([{transform:"translateY(-30px)",opacity:0},{transform:"translateY(0px)",opacity:1}],{duration:700,easing:"ease-out"})}catch{d.warn("Animation not supported, div will be fixed.")}const a=document.createElement("p");if(a.id="loggedText",a.innerHTML=t,a.style.margin="0px",s.appendChild(a),g.appendChild(s),b.push(r),i)return;const c=700,L=3e3;setTimeout(()=>{try{s.animate([{transform:"translateY(0px)",opacity:1},{transform:"translateY(-30px)",opacity:0}],{duration:c,easing:"ease-in"})}catch{d.warn("Animation not supported, div will be fixed.")}},L),setTimeout(()=>{x(r)},L+c)};const f=function(e,t){e.addEventListener("touchstart",o=>{t()}),e.addEventListener("click",o=>{t()})}})(v=D.multiplayerComponents||(D.multiplayerComponents={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=multiplayercomponents.js.map
